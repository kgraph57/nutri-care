import type { ToleranceEntry } from '../types/toleranceData'

/**
 * 小児ICU患者の栄養耐性（フィーディングトレランス）サンプルデータ
 * 各患者に時系列データを持たせてトレンド確認可能に
 */

function daysAgoDate(n: number): string {
  const d = new Date()
  d.setDate(d.getDate() - n)
  return d.toISOString().split('T')[0]
}

// ─── P002 佐藤花子（12歳, 肺炎）─── 改善傾向 (5→7→9)
const P002_TOLERANCE: ToleranceEntry[] = [
  {
    id: 'tol-P002-001',
    patientId: 'P002',
    date: daysAgoDate(3),
    time: '08:00',
    gastricResidual: 45,
    gastricResidualAction: 'reduce',
    vomiting: 'mild',
    vomitingEpisodes: 1,
    abdominalDistension: 'mild',
    bowelSounds: 'reduced',
    stoolCount: 0,
    stoolConsistency: 'none',
    toleranceScore: 5,
    feedingAdjustment: 'maintain',
    notes: '経管栄養20mL/h開始。軽度腹部膨満あり、腸蠕動音やや減弱。GRV 45mLのため投与速度維持。',
  },
  {
    id: 'tol-P002-002',
    patientId: 'P002',
    date: daysAgoDate(2),
    time: '08:00',
    gastricResidual: 20,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'soft',
    toleranceScore: 7,
    feedingAdjustment: 'advance',
    notes: '嘔吐なし、腸蠕動音良好。GRV低下し経管栄養30mL/hへ増量。軟便1回あり。',
  },
  {
    id: 'tol-P002-003',
    patientId: 'P002',
    date: daysAgoDate(1),
    time: '08:00',
    gastricResidual: 10,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 2,
    stoolConsistency: 'formed',
    toleranceScore: 9,
    feedingAdjustment: 'advance',
    notes: '経管栄養40mL/hへ増量可能。排便正常化。目標カロリー到達間近。退室に向け経口摂取への移行検討。',
  },
]

// ─── P011 木村蒼太（3歳, 脳炎）─── 不安定な経過 (4→6→5→7)
const P011_TOLERANCE: ToleranceEntry[] = [
  {
    id: 'tol-P011-001',
    patientId: 'P011',
    date: daysAgoDate(4),
    time: '06:00',
    gastricResidual: 30,
    gastricResidualAction: 'reduce',
    vomiting: 'moderate',
    vomitingEpisodes: 2,
    abdominalDistension: 'mild',
    bowelSounds: 'reduced',
    stoolCount: 0,
    stoolConsistency: 'none',
    toleranceScore: 4,
    feedingAdjustment: 'reduce',
    notes: '意識レベル低下に伴い消化管機能低下。嘔吐2回、GRV 30mL。経管栄養10mL/hへ減量。',
  },
  {
    id: 'tol-P011-002',
    patientId: 'P011',
    date: daysAgoDate(3),
    time: '06:00',
    gastricResidual: 15,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'loose',
    toleranceScore: 6,
    feedingAdjustment: 'maintain',
    notes: '嘔吐消失、腸蠕動音回復。泥状便1回。意識レベルやや改善。経管栄養15mL/hで維持。',
  },
  {
    id: 'tol-P011-003',
    patientId: 'P011',
    date: daysAgoDate(2),
    time: '06:00',
    gastricResidual: 35,
    gastricResidualAction: 'reduce',
    vomiting: 'mild',
    vomitingEpisodes: 1,
    abdominalDistension: 'mild',
    bowelSounds: 'reduced',
    stoolCount: 0,
    stoolConsistency: 'none',
    toleranceScore: 5,
    feedingAdjustment: 'reduce',
    notes: '痙攣発作後に消化管機能再悪化。軽度嘔吐1回、GRV上昇。経管栄養10mL/hへ再減量。',
  },
  {
    id: 'tol-P011-004',
    patientId: 'P011',
    date: daysAgoDate(1),
    time: '06:00',
    gastricResidual: 10,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'soft',
    toleranceScore: 7,
    feedingAdjustment: 'advance',
    notes: '抗痙攣薬調整後安定。嘔吐なし、腸蠕動音良好。経管栄養20mL/hへ増量。',
  },
]

// ─── P012 松本凛（早産児, 修正32週）─── 慎重な増量 (6→7→6→8→8)
const P012_TOLERANCE: ToleranceEntry[] = [
  {
    id: 'tol-P012-001',
    patientId: 'P012',
    date: daysAgoDate(5),
    time: '09:00',
    gastricResidual: 3,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'loose',
    toleranceScore: 6,
    feedingAdjustment: 'maintain',
    notes: '母乳2mL/3h経管投与中。GRV 3mL（前回投与量の30%以下）。NEC徴候なし。慎重に経過観察。',
  },
  {
    id: 'tol-P012-002',
    patientId: 'P012',
    date: daysAgoDate(4),
    time: '09:00',
    gastricResidual: 2,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 2,
    stoolConsistency: 'soft',
    toleranceScore: 7,
    feedingAdjustment: 'advance',
    notes: '母乳3mL/3hへ増量。排便2回、移行便。腹部柔軟、腸蠕動音正常。',
  },
  {
    id: 'tol-P012-003',
    patientId: 'P012',
    date: daysAgoDate(3),
    time: '09:00',
    gastricResidual: 4,
    gastricResidualAction: 'continue',
    vomiting: 'mild',
    vomitingEpisodes: 1,
    abdominalDistension: 'mild',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'loose',
    toleranceScore: 6,
    feedingAdjustment: 'maintain',
    notes: '少量溢乳1回あり。腹部やや膨満。NEC除外のため腹部X線確認 - 異常なし。増量見送り。',
  },
  {
    id: 'tol-P012-004',
    patientId: 'P012',
    date: daysAgoDate(2),
    time: '09:00',
    gastricResidual: 2,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 3,
    stoolConsistency: 'soft',
    toleranceScore: 8,
    feedingAdjustment: 'advance',
    notes: '母乳4mL/3hへ増量。排便パターン安定。腹部所見正常。体重微増傾向。',
  },
  {
    id: 'tol-P012-005',
    patientId: 'P012',
    date: daysAgoDate(1),
    time: '09:00',
    gastricResidual: 1,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 3,
    stoolConsistency: 'soft',
    toleranceScore: 8,
    feedingAdjustment: 'advance',
    notes: '母乳5mL/3hへ増量。消化吸収良好、体重増加+15g/日。フォーティファイヤー追加検討。',
  },
]

// ─── P013 井上大翔（8歳, 虫垂炎術後）─── 術後回復（改善傾向 5→6→8）
const P013_TOLERANCE: ToleranceEntry[] = [
  {
    id: 'tol-P013-001',
    patientId: 'P013',
    date: daysAgoDate(3),
    time: '08:00',
    gastricResidual: 35,
    gastricResidualAction: 'reduce',
    vomiting: 'mild',
    vomitingEpisodes: 1,
    abdominalDistension: 'mild',
    bowelSounds: 'reduced',
    stoolCount: 0,
    stoolConsistency: 'none',
    toleranceScore: 5,
    feedingAdjustment: 'maintain',
    notes: '術後3日目、消化態製剤で経腸開始。軽度腹部膨満・腸蠕動音やや減弱。GRV 35mLのため速度維持。',
  },
  {
    id: 'tol-P013-002',
    patientId: 'P013',
    date: daysAgoDate(2),
    time: '08:00',
    gastricResidual: 18,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'loose',
    toleranceScore: 6,
    feedingAdjustment: 'advance',
    notes: '腸蠕動音回復、排ガス確認。泥状便1回。腹部ドレーン排液減少傾向。経腸栄養増量へ。',
  },
  {
    id: 'tol-P013-003',
    patientId: 'P013',
    date: daysAgoDate(1),
    time: '08:00',
    gastricResidual: 10,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 2,
    stoolConsistency: 'soft',
    toleranceScore: 8,
    feedingAdjustment: 'advance',
    notes: '消化管機能良好。排便正常化。経腸栄養目標量の80%達成。経口摂取への移行を検討開始。',
  },
]

// ─── P014 斎藤結衣（15歳, 神経性やせ症）─── 超低速Refeeding、慎重な耐性管理 (5→5→6→7)
const P014_TOLERANCE: ToleranceEntry[] = [
  {
    id: 'tol-P014-001',
    patientId: 'P014',
    date: daysAgoDate(5),
    time: '09:00',
    gastricResidual: 20,
    gastricResidualAction: 'continue',
    vomiting: 'mild',
    vomitingEpisodes: 1,
    abdominalDistension: 'mild',
    bowelSounds: 'reduced',
    stoolCount: 0,
    stoolConsistency: 'none',
    toleranceScore: 5,
    feedingAdjustment: 'maintain',
    notes: 'Refeeding開始5kcal/kg/日。胃食道逆流あり。腸蠕動音やや減弱。嘔気あり1回。速度維持。',
  },
  {
    id: 'tol-P014-002',
    patientId: 'P014',
    date: daysAgoDate(4),
    time: '09:00',
    gastricResidual: 15,
    gastricResidualAction: 'continue',
    vomiting: 'mild',
    vomitingEpisodes: 1,
    abdominalDistension: 'none',
    bowelSounds: 'reduced',
    stoolCount: 0,
    stoolConsistency: 'none',
    toleranceScore: 5,
    feedingAdjustment: 'maintain',
    notes: '嘔吐1回（少量）。電解質安定継続。体重変動なし。Refeeding注意継続。増量見送り。',
  },
  {
    id: 'tol-P014-003',
    patientId: 'P014',
    date: daysAgoDate(3),
    time: '09:00',
    gastricResidual: 10,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'hard',
    toleranceScore: 6,
    feedingAdjustment: 'advance',
    notes: '嘔吐なし、腸蠕動音改善。硬便1回（便秘傾向あり）。8kcal/kg/日へ増量。緩下剤追加検討。',
  },
  {
    id: 'tol-P014-004',
    patientId: 'P014',
    date: daysAgoDate(2),
    time: '09:00',
    gastricResidual: 8,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'soft',
    toleranceScore: 7,
    feedingAdjustment: 'advance',
    notes: '耐性改善良好。排便改善（軟便1回）。10kcal/kg/日へ増量。電解質安定継続中。',
  },
  {
    id: 'tol-P014-005',
    patientId: 'P014',
    date: daysAgoDate(1),
    time: '09:00',
    gastricResidual: 5,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'soft',
    toleranceScore: 7,
    feedingAdjustment: 'maintain',
    notes: '耐性良好継続。10kcal/kg/日で安定。体重+0.3kgで目標範囲内。P 2.5mg/dL正常範囲。',
  },
]

// ─── P015 清水陽向（1歳, 心臓術後）─── 中等度の耐性 (5→6→7)
const P015_TOLERANCE: ToleranceEntry[] = [
  {
    id: 'tol-P015-001',
    patientId: 'P015',
    date: daysAgoDate(3),
    time: '07:00',
    gastricResidual: 25,
    gastricResidualAction: 'reduce',
    vomiting: 'mild',
    vomitingEpisodes: 1,
    abdominalDistension: 'mild',
    bowelSounds: 'reduced',
    stoolCount: 0,
    stoolConsistency: 'none',
    toleranceScore: 5,
    feedingAdjustment: 'maintain',
    notes: '心臓手術後48h、経管栄養5mL/h開始。循環動態安定確認後に開始。軽度腹部膨満あり、腸蠕動音やや減弱。',
  },
  {
    id: 'tol-P015-002',
    patientId: 'P015',
    date: daysAgoDate(2),
    time: '07:00',
    gastricResidual: 15,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 1,
    stoolConsistency: 'loose',
    toleranceScore: 6,
    feedingAdjustment: 'maintain',
    notes: 'GRV減少、嘔吐なし。循環動態安定、乳酸値正常。泥状便1回。水分制限下のため投与速度維持。',
  },
  {
    id: 'tol-P015-003',
    patientId: 'P015',
    date: daysAgoDate(1),
    time: '07:00',
    gastricResidual: 8,
    gastricResidualAction: 'continue',
    vomiting: 'none',
    vomitingEpisodes: 0,
    abdominalDistension: 'none',
    bowelSounds: 'present',
    stoolCount: 2,
    stoolConsistency: 'soft',
    toleranceScore: 7,
    feedingAdjustment: 'advance',
    notes: '消化管機能回復傾向。経管栄養10mL/hへ増量。排便正常化。循環動態安定のため慎重に増量継続。',
  },
]

/**
 * 全患者の栄養耐性データ（Record<patientId, ToleranceEntry[]>）
 * useToleranceDataのseedデータとして使用
 */
export const sampleToleranceDataMap: Record<string, ToleranceEntry[]> = {
  P002: P002_TOLERANCE,
  P011: P011_TOLERANCE,
  P012: P012_TOLERANCE,
  P013: P013_TOLERANCE,
  P014: P014_TOLERANCE,
  P015: P015_TOLERANCE,
}
